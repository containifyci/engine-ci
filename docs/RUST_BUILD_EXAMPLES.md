# Rust Build Script Examples

This document shows example build scripts generated by the Rust build support.

## Example 1: Basic Release Build

**Configuration:**
```go
profile: "release"
folder: "."
verbose: false
```

**Generated Script:**
```bash
#!/bin/sh
set -e
export CARGO_HOME=/root/.cargo
cargo build --color never --release
cargo test --color never --release
```

## Example 2: Debug Build with Verbose Output

**Configuration:**
```go
profile: "debug"
folder: "."
verbose: true
```

**Generated Script:**
```bash
#!/bin/sh
set -xe
export CARGO_HOME=/root/.cargo
cargo build --color never --verbose
cargo test --color never --verbose
```

## Example 3: Release Build with Target Platform

**Configuration:**
```go
profile: "release"
target: "x86_64-unknown-linux-musl"
folder: "."
```

**Generated Script:**
```bash
#!/bin/sh
set -e
export CARGO_HOME=/root/.cargo
cargo build --color never --release --target x86_64-unknown-linux-musl
cargo test --color never --release --target x86_64-unknown-linux-musl
```

## Example 4: Release Build with Cargo Features

**Configuration:**
```go
profile: "release"
features: ["tokio", "serde"]
folder: "."
```

**Generated Script:**
```bash
#!/bin/sh
set -e
export CARGO_HOME=/root/.cargo
cargo build --color never --release --features tokio,serde
cargo test --color never --release --features tokio,serde
```

## Example 5: Build in Subdirectory

**Configuration:**
```go
profile: "release"
folder: "my-project"
```

**Generated Script:**
```bash
#!/bin/sh
set -e
export CARGO_HOME=/root/.cargo
cd my-project
cargo build --color never --release
cargo test --color never --release
```

## Example 6: Full-Featured Build

**Configuration:**
```go
profile: "release"
target: "x86_64-unknown-linux-musl"
features: ["server", "tls", "logging"]
folder: "services/api"
verbose: true
```

**Generated Script:**
```bash
#!/bin/sh
set -xe
export CARGO_HOME=/root/.cargo
cd services/api
cargo build --color never --release --target x86_64-unknown-linux-musl --features server,tls,logging --verbose
cargo test --color never --release --target x86_64-unknown-linux-musl --verbose
```

## Notes

- All scripts start with proper shebang (`#!/bin/sh`)
- Error handling is enabled with `set -e` (exit on error)
- Verbose mode adds `set -x` for command echoing
- Cargo output colors are disabled for better log parsing
- Tests are always run after the build to ensure correctness
- Cache location is explicitly set via `CARGO_HOME`
